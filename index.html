<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Base Like Game</title>
    <!-- –ü–æ–¥–∫–ª—é—á–∞–µ–º Telegram SDK -->
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <!-- –ü–æ–¥–∫–ª—é—á–∞–µ–º Ethers.js –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –∫—Ä–∏–ø—Ç–æ–∫–æ—à–µ–ª—å–∫–æ–º -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/ethers/6.7.0/index.umd.min.js"></script>
    <!-- –ü–æ–¥–∫–ª—é—á–∞–µ–º React –∏ –æ—Å—Ç–∞–ª—å–Ω—ã–µ –±–∏–±–ª–∏–æ—Ç–µ–∫–∏ -->
    <script src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/lucide@latest"></script>
    <style>
        @keyframes leaf-float {
            0% { transform: translateY(0) rotate(0deg) scale(1.5); opacity: 1; }
            100% { transform: translateY(-120px) rotate(90deg) scale(0); opacity: 0; }
        }
        .animate-leaf-float { animation: leaf-float 0.8s cubic-bezier(0.18, 0.89, 0.32, 1.28) forwards; }
        .scale-in-center { animation: scale-in-center 0.3s cubic-bezier(0.25, 0.46, 0.45, 0.94) both; }
        @keyframes scale-in-center { 0% { transform: scale(0); opacity: 1; } 100% { transform: scale(1); opacity: 1; } }
    </style>
</head>
<body class="bg-[#F9FBF9]">
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useEffect, useMemo } = React;

        // --- –ù–ê–°–¢–†–û–ô–ö–ê –î–û–°–¢–£–ü–ê ---
        const ALLOWED_USERS = []; 

        const Icon = ({ name, size = 24, className = "", color = "currentColor", strokeWidth = 2 }) => {
          const icon = lucide.icons[name.toLowerCase().replace(/ /g, '-')];
          if (!icon) return null;
          return (
            <span 
              className={`inline-flex items-center justify-center ${className}`}
              style={{ width: size, height: size, color: color }}
              dangerouslySetInnerHTML={{ 
                __html: icon.toSvg({ width: size, height: size, 'stroke-width': strokeWidth, stroke: 'currentColor', fill: 'none' }) 
              }}
            />
          );
        };

        const BasilPlantSVG = () => (
          <svg width="220" height="220" viewBox="0 0 240 240" fill="none" xmlns="http://www.w3.org/2000/svg" className="drop-shadow-2xl mx-auto">
            <defs>
              <linearGradient id="leafGrad" x1="0%" y1="0%" x2="100%" y2="100%">
                <stop offset="0%" stopColor="#bbf7d0" /><stop offset="50%" stopColor="#22c55e" /><stop offset="100%" stopColor="#15803d" />
              </linearGradient>
            </defs>
            <path d="M120 220 C 120 220, 118 180, 120 120" stroke="#3f6212" strokeWidth="6" strokeLinecap="round" />
            <path d="M115 190 C 80 200, 30 180, 25 140 C 20 100, 80 110, 115 180" fill="url(#leafGrad)" />
            <path d="M125 190 C 160 200, 210 180, 215 140 C 220 100, 160 110, 125 180" fill="url(#leafGrad)" />
            <path d="M118 160 C 90 140, 55 120, 60 80 C 65 40, 105 80, 115 150" fill="url(#leafGrad)" />
            <path d="M122 160 C 150 140, 185 120, 180 80 C 175 40, 135 80, 125 150" fill="url(#leafGrad)" />
            <path d="M120 130 C 105 110, 100 70, 120 40 C 140 70, 135 110, 120 130Z" fill="#4ade80" />
          </svg>
        );

        const App = () => {
          const [tgUser, setTgUser] = useState(null);
          const [isAccessGranted, setIsAccessGranted] = useState(true);
          
          const [walletAddress, setWalletAddress] = useState(null);
          const [isConnecting, setIsConnecting] = useState(false);

          useEffect(() => {
            if (window.Telegram && window.Telegram.WebApp) {
              const webapp = window.Telegram.WebApp;
              webapp.ready();
              webapp.expand();
              const user = webapp.initDataUnsafe?.user;
              setTgUser(user);
              if (ALLOWED_USERS.length > 0 && user) {
                if (!ALLOWED_USERS.includes(user.id)) setIsAccessGranted(false);
              }
            }
          }, []);

          const [points, setPoints] = useState(() => Number(localStorage.getItem('basil_points')) || 0);
          const [dailyRate, setDailyRate] = useState(() => Number(localStorage.getItem('basil_daily_rate')) || 1);
          const [autoWaterLevel, setAutoWaterLevel] = useState(() => Number(localStorage.getItem('basil_water_lvl')) || 0);
          const [isSupporter, setIsSupporter] = useState(() => localStorage.getItem('basil_is_supporter') === 'true');
          const [isKing, setIsKing] = useState(() => localStorage.getItem('basil_is_king') === 'true');
          const [multiplier, setMultiplier] = useState(() => Number(localStorage.getItem('basil_multiplier')) || 1);
          const [resetCount, setResetCount] = useState(() => Number(localStorage.getItem('basil_reset_count')) || 0);
          const [lastResetDay, setLastResetDay] = useState(() => localStorage.getItem('basil_last_reset_day') || "");
          const [elixirExpire, setElixirExpire] = useState(() => Number(localStorage.getItem('basil_elixir_exp')) || 0);
          const [gardenerExpire, setGardenerExpire] = useState(() => Number(localStorage.getItem('basil_gardener_exp')) || 0);
          const [lastClickTime, setLastClickTime] = useState(() => Number(localStorage.getItem('basil_last_click')) || 0);
          const [currentTime, setCurrentTime] = useState(Date.now());
          const [activeTab, setActiveTab] = useState('game');
          const [particles, setParticles] = useState([]);
          const [modal, setModal] = useState({ show: false, title: '', message: '', type: 'info', onConfirm: null });

          const isElixirActive = elixirExpire > currentTime;
          const isGardenerActive = gardenerExpire > currentTime;
          const resetsToday = lastResetDay === new Date().toDateString() ? resetCount : 0;

          const leaders = useMemo(() => [
            { name: "fichtenfuchs", points: 1540200, reward: "75 USDC", isKing: true },
            { name: "crypto_king", points: 1200500, reward: "40 USDC", isKing: true },
            { name: "base_master", points: 980000, reward: "25 USDC", isKing: false },
            { name: tgUser?.first_name || "YOU", points: Math.floor(points), reward: "5 USDC", isKing: isKing, isVip: isSupporter },
          ], [points, isKing, isSupporter, tgUser]);

          useEffect(() => {
            const timer = setInterval(() => setCurrentTime(Date.now()), 1000);
            return () => clearInterval(timer);
          }, []);

          const timeLeftMs = Math.max(0, (lastClickTime + 86400000) - currentTime);
          const canHarvest = timeLeftMs === 0;

          const connectWallet = async () => {
            if (typeof window.ethereum !== 'undefined') {
              try {
                setIsConnecting(true);
                const provider = new ethers.BrowserProvider(window.ethereum);
                const accounts = await provider.send("eth_requestAccounts", []);
                setWalletAddress(accounts[0]);
                
                if (window.Telegram && window.Telegram.WebApp) {
                  window.Telegram.WebApp.HapticFeedback.notificationOccurred('success');
                }
              } catch (error) {
                setModal({ show: true, title: '–û—à–∏–±–∫–∞', message: '–ù–µ —É–¥–∞–ª–æ—Å—å –ø–æ–¥–∫–ª—é—á–∏—Ç—å –∫–æ—à–µ–ª–µ–∫.', type: 'info' });
              } finally {
                setIsConnecting(false);
              }
            } else {
              setModal({ show: true, title: '–ö–æ—à–µ–ª–µ–∫ –Ω–µ –Ω–∞–π–¥–µ–Ω', message: '–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –æ—Ç–∫—Ä–æ–π—Ç–µ —ç—Ç–æ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –≤ –±—Ä–∞—É–∑–µ—Ä–µ —Å –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π Web3 –∏–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ –≤—Å—Ç—Ä–æ–µ–Ω–Ω—ã–π –∫–æ—à–µ–ª–µ–∫ Telegram.', type: 'info' });
            }
          };

          useEffect(() => {
            const totalDaily = (dailyRate + (autoWaterLevel * 2)) * multiplier * (isKing ? 1.5 : 1) * (isElixirActive ? 2 : 1);
            const interval = setInterval(() => setPoints(p => p + (totalDaily / 86400)), 1000);
            return () => clearInterval(interval);
          }, [dailyRate, autoWaterLevel, multiplier, isKing, isElixirActive]);

          useEffect(() => {
            if (isGardenerActive && canHarvest) {
              performHarvest(false);
            }
          }, [currentTime, isGardenerActive, canHarvest]);

          useEffect(() => {
            const data = { basil_points: points, basil_daily_rate: dailyRate, basil_water_lvl: autoWaterLevel, basil_last_click: lastClickTime, basil_is_supporter: isSupporter, basil_is_king: isKing, basil_multiplier: multiplier, basil_elixir_exp: elixirExpire, basil_gardener_exp: gardenerExpire, basil_reset_count: resetCount, basil_last_reset_day: lastResetDay };
            Object.entries(data).forEach(([k, v]) => localStorage.setItem(k, v.toString()));
          }, [points, dailyRate, autoWaterLevel, lastClickTime, isSupporter, isKing, multiplier, elixirExpire, gardenerExpire, resetCount, lastResetDay]);

          const performHarvest = (isManual, e = null) => {
            const reward = (dailyRate + (autoWaterLevel * 2)) * multiplier * (isKing ? 1.5 : 1) * (isElixirActive ? 2 : 1);
            setPoints(p => p + reward);
            setLastClickTime(Date.now());
            const x = e?.clientX || window.innerWidth / 2;
            const y = e?.clientY || window.innerHeight / 2;
            const id = Date.now();
            setParticles(prev => [...prev, { id, x, y, angle: Math.random() * 360 }]);
            setTimeout(() => setParticles(ps => ps.filter(p => p.id !== id)), 800);
            if (isManual && window.Telegram && window.Telegram.WebApp) {
              window.Telegram.WebApp.HapticFeedback.impactOccurred('medium');
            }
          };

          const handleHarvestManual = (e) => {
            if (isGardenerActive || !canHarvest) return;
            performHarvest(true, e);
          };

          const handlePurchase = async (type, mode) => {
            const catalog = {
              fertilizer: { leaf: 50, donor: 0.5, title: '–ó–æ–ª–æ—Ç–æ–µ —É–¥–æ–±—Ä–µ–Ω–∏–µ' },
              elixir: { leaf: 30, donor: 0.2, title: '–≠–ª–∏–∫—Å–∏—Ä –°–∫–æ—Ä–æ—Å—Ç–∏' },
              gardener: { leaf: 40, donor: 0.25, title: '–ê–≤—Ç–æ-—Å–∞–¥–æ–≤–Ω–∏–∫' },
              rain: { leaf: 20, donor: 0.15, title: '–î–æ–∂–¥—å –∏–∑ –ë–∞–∑–∏–ª–∏–∫–∞' },
              lootbox: { leaf: 15, donor: 0.05, title: '–ü–∞–∫–µ—Ç —Å–µ–º—è–Ω' },
              king: { leaf: null, donor: 1.0, title: '–ö–æ—Ä–æ–ª—å –§–µ—Ä–º–µ—Ä–æ–≤' },
              reset: { donor: 0.3, title: '–°–±—Ä–æ—Å —Ç–∞–π–º–µ—Ä–∞' }
            };
            const item = catalog[type];
            const cost = mode === 'leaf' ? item.leaf : item.donor;

            if (mode === 'donor' && !walletAddress) {
                return setModal({ show: true, title: '–ö–æ—à–µ–ª–µ–∫ –Ω–µ –ø–æ–¥–∫–ª—é—á–µ–Ω', message: '–î–ª—è –ø–æ–∫—É–ø–∫–∏ –∑–∞ USDC –Ω—É–∂–Ω–æ –ø–æ–¥–∫–ª—é—á–∏—Ç—å –∫–æ—à–µ–ª–µ–∫.', type: 'info' });
            }

            if (type === 'reset' && resetsToday >= 2) return setModal({ show: true, title: '–õ–∏–º–∏—Ç!', message: '–¢–æ–ª—å–∫–æ 2 —Ä–∞–∑–∞ –≤ –¥–µ–Ω—å.', type: 'info' });
            if (mode === 'leaf' && (item.leaf === null || points < cost)) return setModal({ show: true, title: '–ú–∞–ª–æ üåø', message: '–ù—É–∂–Ω–æ –±–æ–ª—å—à–µ –ª–∏—Å—Ç—å–µ–≤!', type: 'info' });

            setModal({ show: true, title: '–ü–æ–∫—É–ø–∫–∞', message: `–ü—Ä–∏–æ–±—Ä–µ—Å—Ç–∏ –∑–∞ ${cost} ${mode === 'leaf' ? 'üåø' : 'USDC'}?`, type: 'confirm', onConfirm: () => {
              if (mode === 'leaf') setPoints(p => p - cost);
              if (mode === 'donor') setIsSupporter(true);
              if (type === 'fertilizer') setDailyRate(r => r + 1);
              if (type === 'elixir') setElixirExpire(Date.now() + (3 * 86400000));
              if (type === 'gardener') setGardenerExpire(Date.now() + (7 * 86400000));
              if (type === 'king') setIsKing(true);
              if (type === 'reset') { setLastClickTime(0); setResetCount(r => r + 1); setLastResetDay(new Date().toDateString()); }
              if (type === 'rain') { 
                if (Math.random() < 0.1) { setPoints(p => p + 5); setModal({ show: true, title: '–£–†–ê!', message: '–ü–æ—à–µ–ª –¥–æ–∂–¥—å! +5 üåø!', type: 'info' }); }
                else setModal({ show: true, title: '–ú–∏–º–æ', message: '–í —ç—Ç–æ—Ç —Ä–∞–∑ –¥–æ–∂–¥—è –Ω–µ—Ç.', type: 'info' });
                return;
              }
              if (type === 'lootbox') {
                const r = Math.random() * 100;
                if (r < 1) { setPoints(p => p + 100); setModal({ show: true, title: '100 üåø!', message: '–õ–µ–≥–µ–Ω–¥–∞—Ä–Ω—ã–π —É–ª–æ–≤!', type: 'info' }); }
                else if (r < 10) { setElixirExpire(Date.now() + 86400000); setModal({ show: true, title: 'x2 –°–∫–æ—Ä–æ—Å—Ç—å!', message: '–ë—É—Å—Ç –Ω–∞ 24 —á–∞—Å–∞!', type: 'info' }); }
                else { setPoints(p => p + 5); setModal({ show: true, title: '5 üåø', message: '–û–±—ã—á–Ω—ã–π –ø–∞–∫–µ—Ç —Å–µ–º—è–Ω.', type: 'info' }); }
                return;
              }
              setModal({ show: false });
            }});
          };

          if (!isAccessGranted) {
            return (
              <div className="min-h-screen flex flex-col items-center justify-center p-10 text-center bg-slate-900 text-white">
                <Icon name="lock" size={64} className="mb-4 text-yellow-400" />
                <h1 className="text-2xl font-black mb-2">–î–æ—Å—Ç—É–ø –æ–≥—Ä–∞–Ω–∏—á–µ–Ω</h1>
                <p className="text-slate-400 text-sm">–ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –≤ —Ä–µ–∂–∏–º–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è.</p>
              </div>
            );
          }

          return (
            <div className="min-h-screen flex flex-col items-center select-none font-sans overflow-hidden text-slate-900">
              {modal.show && (
                <div className="fixed inset-0 z-[100] flex items-center justify-center p-4 bg-black/60 backdrop-blur-sm">
                  <div className="bg-white rounded-[32px] p-6 w-full max-w-xs text-center scale-in-center shadow-2xl border border-slate-100">
                    <h3 className="font-black text-lg mb-2 tracking-tight">{modal.title}</h3>
                    <p className="text-sm text-slate-500 mb-6 leading-snug">{modal.message}</p>
                    <div className="flex flex-col gap-2">
                      {modal.type === 'confirm' ? (
                        <><button onClick={modal.onConfirm} className="w-full py-4 rounded-2xl bg-blue-600 text-white font-black shadow-lg">–î–∞</button>
                        <button onClick={() => setModal({ show: false })} className="w-full py-2 text-slate-400 font-bold text-xs">–ù–µ—Ç</button></>
                      ) : <button onClick={() => setModal({ show: false })} className="w-full py-4 rounded-2xl bg-slate-900 text-white font-black">–ü–æ–Ω—è—Ç–Ω–æ</button>}
                    </div>
                  </div>
                </div>
              )}

              <header className="w-full max-w-md bg-white border-b p-4 flex justify-between items-center sticky top-0 z-50">
                <div className="flex items-center gap-3">
                    <div className="flex items-center gap-1 font-black text-base shrink-0">
                        <div className="w-8 h-8 bg-blue-600 rounded-full flex items-center justify-center text-white text-xs shadow-sm">B</div>
                        Base Like <Icon name="heart" size={14} className="text-red-500" />
                    </div>
                    {/* –û–±–Ω–æ–≤–ª–µ–Ω–Ω–∞—è –∫–Ω–æ–ø–∫–∞ –ö–æ—à–µ–ª—å–∫–∞ */}
                    <button 
                        onClick={connectWallet}
                        className={`text-xs font-black px-4 py-2 rounded-2xl border shadow-sm transition-all whitespace-nowrap active:scale-95 ${
                            walletAddress 
                            ? 'bg-blue-50 text-blue-600 border-blue-100' 
                            : 'bg-blue-600 text-white border-blue-700 hover:bg-blue-700'
                        }`}
                    >
                        {isConnecting ? '...' : walletAddress ? `${walletAddress.substring(0,4)}...${walletAddress.substring(38)}` : '–ü–æ–¥–∫–ª—é—á–∏—Ç—å Wallet'}
                    </button>
                </div>
                <div className="bg-green-50 px-3 py-1.5 rounded-full border border-green-100 flex items-center gap-2 shrink-0">
                   <Icon name="leaf" size={14} className="text-green-600" />
                   <span className="text-xs font-black">{Math.floor(points)}</span>
                </div>
              </header>

              <main className="flex-1 w-full max-w-md flex flex-col overflow-y-auto pb-24 text-center">
                {activeTab === 'game' && (
                  <div className="pt-8 px-6 flex flex-col items-center">
                    <div className="relative mb-6">
                      {isKing && <div className="absolute -top-4 left-1/2 -translate-x-1/2 bg-yellow-400 text-white px-2 py-0.5 rounded-full text-[8px] font-black uppercase shadow-sm">King</div>}
                      <div className="text-6xl font-black tracking-tight">{Math.floor(points).toLocaleString()}</div>
                    </div>
                    <div className={`relative mb-4 transition-transform ${isGardenerActive ? 'cursor-default' : 'cursor-pointer active:scale-95'}`} onClick={handleHarvestManual}>
                      <div className={`absolute inset-0 rounded-full blur-3xl transition-opacity ${canHarvest ? 'bg-green-400/30' : 'bg-blue-400/10'}`}></div>
                      <BasilPlantSVG />
                      {!canHarvest && !isGardenerActive && <div className="absolute inset-0 flex items-center justify-center"><Icon name="clock" size={48} className="text-blue-500 animate-pulse" /></div>}
                      {isGardenerActive && (
                        <div className="absolute top-0 right-0 bg-blue-600 text-white p-2 rounded-full border-2 border-white shadow-lg animate-bounce"><Icon name="bot" size={20} /></div>
                      )}
                    </div>

                    {canHarvest && !isGardenerActive ? (
                      <button onClick={handleHarvestManual} className="w-full max-w-[200px] bg-green-500 text-white font-black py-4 rounded-3xl shadow-xl animate-bounce">–°–û–ë–†–ê–¢–¨ üåø</button>
                    ) : (
                      <div className="space-y-4 w-full max-w-[240px]">
                          <div className="bg-white border p-4 rounded-3xl shadow-sm">
                              <p className="text-[10px] font-bold text-slate-400 uppercase tracking-widest mb-1 font-black">
                                {isGardenerActive ? '–†–∞–±–æ—Ç–∞–µ—Ç –ê–≤—Ç–æ-—Å–∞–¥–æ–≤–Ω–∏–∫' : '–ë–∞–∑–∏–ª–∏–∫ —Ä–∞—Å—Ç–µ—Ç...'}
                              </p>
                              <div className="text-2xl font-mono font-black text-blue-600">
                                  {Math.floor(timeLeftMs/3600000)}:{Math.floor((timeLeftMs%3600000)/60000).toString().padStart(2,'0')}:{Math.floor((timeLeftMs%60000)/1000).toString().padStart(2,'0')}
                              </div>
                          </div>
                          <button onClick={() => handlePurchase('reset', 'donor')} disabled={resetsToday >= 2} className={`w-full py-3 rounded-2xl border text-[10px] font-black flex items-center justify-center gap-2 transition-all ${resetsToday < 2 ? 'bg-blue-50 text-blue-600 border-blue-100' : 'bg-slate-50 text-slate-300 border-slate-100'}`}>
                              <Icon name="zap" size={14} className={resetsToday < 2 ? "text-blue-600" : ""} /> –°–±—Ä–æ—Å —Ç–∞–π–º–µ—Ä–∞ {resetsToday}/2 ($0.30)
                          </button>
                      </div>
                    )}
                  </div>
                )}

                {activeTab === 'shop' && (
                  <div className="p-6 space-y-4 text-left">
                    <h2 className="text-2xl font-black mb-4 flex items-center gap-2 tracking-tight"><Icon name="shopping-cart" size={24} className="text-red-500" /> –ú–∞—Ä–∫–µ—Ç</h2>
                    {!walletAddress && (
                        <div className="bg-blue-600 p-4 rounded-[24px] text-white mb-4 flex items-center justify-between shadow-lg animate-pulse">
                            <div className="text-xs font-bold leading-tight">–ü–æ–¥–∫–ª—é—á–∏—Ç–µ –∫–æ—à–µ–ª–µ–∫,<br/>—á—Ç–æ–±—ã –ø–æ–∫—É–ø–∞—Ç—å –∑–∞ USDC</div>
                            <button onClick={connectWallet} className="bg-white text-blue-600 px-3 py-1.5 rounded-xl font-black text-[10px]">CONNECT</button>
                        </div>
                    )}
                    {[
                        { id: 'lootbox', icon: "box", color: "#f97316", t: '–ü–∞–∫–µ—Ç —Å–µ–º—è–Ω', d: '–®–∞–Ω—Å –Ω–∞ üåø –∏–ª–∏ –±—É—Å—Ç—ã.', l: 15, c: 0.05 },
                        { id: 'fertilizer', icon: "star", color: "#eab308", t: '–ó–æ–ª–æ—Ç–æ–µ —É–¥–æ–±—Ä–µ–Ω–∏–µ', d: '+1 üåø/—Å—É—Ç –Ω–∞–≤—Å–µ–≥–¥–∞.', l: 50, c: 0.5 },
                        { id: 'elixir', icon: "zap", color: "#a855f7", t: '–≠–ª–∏–∫—Å–∏—Ä –°–∫–æ—Ä–æ—Å—Ç–∏', d: 'x2 –¥–æ—Ö–æ–¥ (3 –¥–Ω—è).', l: 30, c: 0.2 },
                        { id: 'gardener', icon: "bot", color: "#3b82f6", t: '–ê–≤—Ç–æ-—Å–∞–¥–æ–≤–Ω–∏–∫', d: '–ê–≤—Ç–æ-—Å–±–æ—Ä (1 –Ω–µ–¥–µ–ª—è).', l: 40, c: 0.25 }
                    ].map(i => (
                        <div key={i.id} className="bg-white border p-4 rounded-[28px] flex flex-col gap-4 shadow-sm">
                            <div className="flex items-center gap-4 text-left">
                                <div className="w-10 h-10 bg-slate-50 rounded-xl flex items-center justify-center"><Icon name={i.icon} size={20} color={i.color} /></div>
                                <div><h4 className="font-black text-sm">{i.t}</h4><p className="text-[10px] text-slate-400 font-bold">{i.d}</p></div>
                            </div>
                            <div className="grid grid-cols-2 gap-2">
                                <button onClick={() => handlePurchase(i.id, 'leaf')} className="bg-green-50 text-green-700 py-2 rounded-xl text-xs font-black active:scale-95 transition-transform">{i.l} üåø</button>
                                <button onClick={() => handlePurchase(i.id, 'donor')} className="bg-blue-50 text-blue-700 py-2 rounded-xl text-xs font-black active:scale-95 transition-transform">${i.c.toFixed(2)}</button>
                            </div>
                        </div>
                    ))}
                  </div>
                )}
                
                {activeTab === 'leaderboard' && (
                  <div className="p-6 text-left">
                    <div className="bg-slate-900 rounded-[32px] p-6 text-white mb-6 relative overflow-hidden">
                      <h2 className="text-xl font-black flex items-center gap-2 relative z-10"><Icon name="trophy" size={24} color="#fbbf24" /> –¢–æ–ø –ú–µ—Å—è—Ü–∞</h2>
                      <p className="text-xs text-slate-400 mt-1 relative z-10 font-bold">–ü—Ä–∏–∑: 150 USDC –∑–∞ 1 –º–µ—Å—Ç–æ</p>
                    </div>
                    <div className="bg-white rounded-[32px] shadow-sm border border-slate-100 overflow-hidden">
                      {leaders.map((l, i) => (
                        <div key={i} className={`flex justify-between p-5 border-b border-slate-50 last:border-0 items-center ${l.isKing ? 'bg-yellow-50/50' : ''}`}>
                           <div className="flex flex-col">
                             <span className={`font-black text-slate-800 flex items-center gap-1 ${l.isKing ? 'text-yellow-700' : ''}`}>
                                {i+1}. {l.name} {l.isKing && <Icon name="crown" size={12} color="#eab308" />}
                             </span>
                             <span className="text-[10px] text-slate-400 font-bold uppercase tracking-tighter">{l.points.toLocaleString()} üåø</span>
                           </div>
                           <span className="font-black text-blue-600 bg-blue-50 px-3 py-1 rounded-lg text-xs">{l.reward}</span>
                        </div>
                      ))}
                    </div>
                  </div>
                )}
              </main>

              <nav className="fixed bottom-0 w-full max-w-md bg-white border-t flex justify-around p-4 shadow-2xl backdrop-blur-md z-50">
                <button onClick={() => setActiveTab('game')} className={`flex flex-col items-center gap-1 transition-colors ${activeTab==='game'?'text-blue-600':'text-slate-400'}`}><Icon name="leaf" size={24}/><span className="text-[10px] font-black uppercase">–°–±–æ—Ä</span></button>
                <button onClick={() => setActiveTab('shop')} className={`flex flex-col items-center gap-1 transition-colors ${activeTab==='shop'?'text-blue-600':'text-slate-400'}`}><Icon name="shopping-cart" size={24}/><span className="text-[10px] font-black uppercase">–ú–∞—Ä–∫–µ—Ç</span></button>
                <button onClick={() => setActiveTab('leaderboard')} className={`flex flex-col items-center gap-1 transition-colors ${activeTab==='leaderboard'?'text-blue-600':'text-slate-400'}`}><Icon name="trophy" size={24}/><span className="text-[10px] font-black uppercase">–¢–æ–ø</span></button>
              </nav>

              {particles.map(p => <div key={p.id} className="fixed pointer-events-none z-[60] text-3xl animate-leaf-float" style={{ left: p.x, top: p.y }}>üåø</div>)}
            </div>
          );
        };

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<App />);
    </script>
</body>
</html>
